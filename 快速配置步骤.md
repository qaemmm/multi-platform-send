# 🚀 字流项目快速配置步骤

## 📋 **立即执行清单（解决500错误）**

### **🔥 第一步：注册Turso数据库（5分钟）**

1. **访问并注册**
   ```
   网址：https://turso.tech
   用GitHub账号登录
   ```

2. **创建数据库**
   - 点击 "Create Database"
   - 数据库名称：`ziliu-db`
   - 选择区域：推荐 `Hong Kong` 或 `Singapore`
   - 点击创建

3. **获取连接信息**
   - 创建成功后会显示：
   ```
   Database URL: libsql://ziliu-db-xxxx.turso.io
   Auth Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

### **🔧 第二步：配置Vercel环境变量（3分钟）**

1. **访问Vercel项目**
   ```
   进入：https://vercel.com
   选择你的项目 → Settings → Environment Variables
   ```

2. **删除现有配置**，重新添加以下配置：

   ```bash
   # 变量名 = 值
   NEXTAUTH_SECRET = ziliu-super-secret-key-2025-long-enough
   NEXTAUTH_URL = https://ziliu.huiouye.asia
   NEXT_PUBLIC_APP_URL = https://ziliu.huiouye.asia
   NEXT_PUBLIC_API_BASE_URL = https://ziliu.huiouye.asia
   TURSO_DATABASE_URL = libsql://ziliu-db-xxxx.turso.io  # 替换为你的实际地址
   TURSO_AUTH_TOKEN = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...  # 替换为你的实际令牌
   NODE_ENV = production
   ```

3. **保存并重新部署**
   - 点击保存
   - 回到Deployments页面
   - 点击 Redeploy

---

## 📸 **后续配置（图片功能）**

### **第三步：配置Cloudflare R2（可选，10分钟）**

1. **注册Cloudflare**
   ```
   网址：https://cloudflare.com
   注册并登录
   ```

2. **创建R2存储桶**
   - 进入 R2 → Create Bucket
   - 名称：`ziliu-images`
   - 区域：选择就近区域

3. **生成API密钥**
   - 进入 R2 → Manage API Tokens
   - 创建 API Token
   - 权限：Object Read & Write

4. **添加R2配置到Vercel**
   ```bash
   R2_ACCOUNT_ID = your-cloudflare-account-id
   R2_ACCESS_KEY_ID = your-r2-access-key-id
   R2_SECRET_ACCESS_KEY = your-r2-secret-access-key
   R2_BUCKET_NAME = ziliu-images
   ```

---

## 💳 **商业化配置（可选）**

### **第四步：配置Stripe支付（15分钟）**

1. **注册Stripe**
   ```
   网址：https://stripe.com
   注册测试账号
   ```

2. **获取API密钥**
   - Dashboard → Developers → API Keys
   - 获取 Publishable Key 和 Secret Key

3. **配置Webhook**
   - Dashboard → Developers → Webhooks
   - 添加端点：`https://ziliu.huiouye.asia/api/webhooks/stripe`

4. **添加支付配置到Vercel**
   ```bash
   STRIPE_PUBLIC_KEY = pk_test_xxxxxxxxxxxxxx
   STRIPE_SECRET_KEY = sk_test_xxxxxxxxxxxxxx
   STRIPE_WEBHOOK_SECRET = whsec_xxxxxxxxxxxxxx
   ```

---

## 🎯 **功能验证清单**

### **基础功能测试**
- [ ] 网站能正常访问
- [ ] 用户能正常注册登录
- [ ] 能创建和编辑文章
- [ ] 文章能正常保存

### **图片功能测试**
- [ ] 图片能正常上传
- [ ] 图片能正常显示
- [ ] 外链图片能正常转存

### **发布功能测试**
- [ ] 各平台发布功能正常
- [ ] 浏览器插件能正常使用
- [ ] 格式转换功能正常

### **支付功能测试**
- [ ] 订阅页面正常显示
- [ ] 支付流程正常
- [ ] 权限升级正常

---

## 🔍 **如果还有错误**

### **查看错误日志**
1. Vercel项目页面 → Functions 标签
2. 查看具体的错误信息
3. 根据错误类型排查问题

### **常见问题**
- **500错误**: 检查环境变量是否完整
- **数据库错误**: 检查Turso配置是否正确
- **登录失败**: 检查NEXTAUTH相关配置
- **图片错误**: 检查R2或其他存储配置

### **获取帮助**
- 查看详细的《项目配置指南.md》
- 检查浏览器控制台错误信息（F12）
- 联系技术支持

---

## 📞 **紧急联系**

如果遇到无法解决的问题：

1. **截图错误信息**
2. **记录错误发生的时间**
3. **提供当前的环境变量配置**（隐藏敏感信息）
4. **联系开发者寻求帮助**

---

**⚡ 开始行动：现在就去注册Turso数据库！**